#!/usr/bin/env bash
#
# Similar to Windows Total Commander
#
# Based on https://software.opensuse.org/download.html?project=home%3AAlexx2000&package=doublecmd-gtk
#
#author      :Tomas Skalicky <skalicky.tomas@gmail.com>
#======================================================

#-------------------------------------------------------------------------------

configure_double_commander_apt_sources() {
    local -r keyring_file_name=home_Alexx2000.gpg
    local -r keyring_file_path=${keyrings_home:?}/$keyring_file_name
    #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    local file_contents
    set +e
    read -r -d '' file_contents <<- EOF
	# Generated by Tomas' setup scripts.
	deb   [arch=$(dpkg --print-architecture) signed-by=$keyring_file_path]   http://download.opensuse.org/repositories/home:/Alexx2000/xUbuntu_25.04/   /
	EOF
    set -e
    set_file_contents \
                      /etc/apt/sources.list.d/home:Alexx2000.list \
                      "$file_contents"
    #~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    aptkey_add https://download.opensuse.org/repositories/home:Alexx2000/xUbuntu_25.04/Release.key "$keyring_file_name"
}

#-------------------------------------------------------------------------------

double_commander_packages_to_install=(
    doublecmd-gtk
)

#-------------------------------------------------------------------------------

install_double_commander() {
    aptget_update
    aptget_install "${double_commander_packages_to_install[@]}"
}

#-------------------------------------------------------------------------------

main() {
    configure_double_commander_apt_sources
    install_double_commander
}

#-------------------------------------------------------------------------------

main

